== Predeployment steps

Complete the following steps before you deploy the Partner Solution.

=== Sign up for a Salesforce account
If you don't already have a Salesforce account, https://catalog.us-east-1.prod.workshops.aws/workshops/9787ec94-1ace-44cc-91e5-976ad7ddc0b1/en-US/salesforce/salesforce-signup[sign up for one^].

// Configure Salesforce connection go to:  https://developer.salesforce.com/

//TODO Troy, Why is the above line commented out; will we be adding it?

=== Connect your VPC in the AWS Cloud with your Salesforce account

When you connect your VPC in the AWS Cloud with your Salesforce-managed VPC using AWS PrivateLink, data traffic flows between the VPCs automatically. Connect the VPCs as follows.

. Sign in to the AWS Management Console and open the https://us-east-1.console.aws.amazon.com/appflow/[Amazon AppFlow console^].

. In the navigation pane, choose *Connections*, and then choose *Salesforce* as your connector.

. Choose *Create connection*. If prompted to log in to Salesforce, do so.

. Choose Salesforce from the dropdown list of connections, and choose *Connect*. If you have used AppFlow previously in your account, *Create new connection* may appear in the *Choose Salesforce connection* dropdown list.

. On the *Connect to Salesforce* screen (shown in <<#ConnectionName>>), choose *Production* for your Salesforce environment, and enter your connection name.
. *NOTE* That Sandbox Accounts has to be provisioned by a Salesforce administrator.
+
[#ConnectionName]
.The "Connect to Salesforce" screen in the Amazon AppFlow console
[link=image::../docs/deployment_guide/images/aws-quickstart-predeployment-connect-salesforce.png]
image::../docs/deployment_guide/images/aws-quickstart-predeployment-connect-salesforce.png[]

. Log in to Salesforce sight in screen.

. Allow Amazon AppFlow to access your Salesforce account.

When you deploy this Partner Solution, your connection name will be passed to the CloudFormation template, as shown in <<ApplowConnectionCloudformation>>.

[#ApplowConnectionCloudformation]
.CloudFormation template section for configuring Amazon AppFlow
[link=image::../docs/deployment_guide/images/aws-quickstart-predeployment-appflow-connection-example.png]
image::../docs/deployment_guide/images/aws-quickstart-predeployment-appflow-connection-example.png[]


//TODO Troy, How does this predeployment process work for people who want to deploy to a new VPC? Or who have a VPC but don't have PrivateLink?
//Privatelink need to be done by Salesdorce admin, 

//TODO Troy, Are steps 2-4 correct as edited?
//yes, it is correct 

//TODO Troy, What if people want to deploy into a sandbox environment? (The parameter description seems to indicate that we have to be in a production environment. I'm not clear on what the param description implies; let's look at that together.)
// They need to have Sandbox envirement to run it, we tested all works 


//TODO Troy, Can we choose whatever connection name we want? Any constraints, suggestions, things to avoid?
// We can choose any connection name we want

//TODO Troy, Where in these steps do we use PrivateLink?
//Private Connect is available in partnership with AWS via a feature called AWS PrivateLink. PrivateLink provides private connectivity between VPCs, AWS services, and on-premise applications on the Amazon Network. Connect your existing or new AWS VPC to a Salesforce-managed VPC with PrivateLink. Then, all the data traffic flowing between your VPC and your Salesforce org is automatically routed through the connection.
//Privatelink need to be done by Salesdorce admin 
//https://help.salesforce.com/s/articleView?id=sf.private_connect_overview.htm&type=5 

